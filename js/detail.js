"use strict";var big={init:function(){this.$box=document.querySelector(".box"),this.$showImage=this.$box.querySelector(".show-image"),this.$showBigImage=this.$box.querySelector(".show-big-image"),this.$ulbox=this.$box.querySelector(".img-box"),this.$liAll=this.$ulbox.children,this.$filter=this.$showImage.querySelector(".filter");for(var e=0;e<this.$liAll.length;e++)this.$liAll[e].index=e;this.event(),this.mouser()},event:function(){var l=this;this.$ulbox.onclick=function(e){var t=(e=e||window.event).target||e.srcElement;"IMG"===t.nodeName&&l.showImage(t.parentNode.index)},this.$showImage.onmouseenter=function(){l.$filter.style.display="block",l.$showBigImage.style.display="block"},this.$showImage.onmouseleave=function(){l.$filter.style.display="none",l.$showBigImage.style.display="none"},this.$showImage.onmousemove=function(e){var t=(e=e||window.event).pageX-this.offsetLeft-l.$filter.offsetWidth/2,o=e.pageY-this.offsetTop-l.$filter.offsetHeight/2,n=this.clientWidth-l.$filter.offsetWidth,i=this.clientHeight-l.$filter.offsetHeight;n<=t?t=n:t<=0&&(t=0),i<=o?o=i:o<=0&&(o=0),l.$filter.style.left=t+"px",l.$filter.style.top=o+"px";var r=l.$showBigImage.querySelector("img");r.style.left=-3*t+"px",r.style.top=-3*o+"px"}},showImage:function(e){console.log(e);for(var t=0;t<this.$liAll.length;t++)this.$liAll[t].className="";this.$liAll[e].className="active";var o=this.$liAll[e].querySelector("img").src;this.$showImage.querySelector("img").src=o.replace("small","big"),this.$showBigImage.querySelector("img").src=o.replace("small","largest"),console.log(o)},mouser:function(){for(var t=this,e=0;e<t.$liAll.length;e++)t.$liAll[e].onmouseenter=function(e){t.showImage(this.index)}}};big.init();var addshop=function(){var e=document.querySelector(".car"),n=document.querySelector(".title1"),i=document.querySelector(".price-shop"),r=document.querySelector(".shopnum"),l=document.querySelector(".carcount"),t=document.querySelector(".car_icon"),c=document.querySelector(".car_num"),o=new Move(".car_icon"),s=document.querySelector(".confirm"),a=document.querySelector(".close"),u=document.querySelector(".cover"),h=(document.querySelector(".cover_box"),document.querySelector(".cover_title"),document.querySelector(".sure")),m=0;return{init:function(){if(localStorage.shops&&"[]"!=localStorage.shops){for(var e=JSON.parse(localStorage.shops),t=0;t<e.length;t++)m=t;l.innerHTML="购物车("+t+")",c.innerHTML=t}else l.innerHTML="购物车(0)",c.innerHTML="0";this.event()},event:function(){var o=this;e.onclick=function(){var e=document.querySelector(".img-box img").src;m++;var t={shopname:n.innerHTML,prcie:i.innerHTML,num:r.value,shop_img:e};o.judge("shops","shopname",n.innerHTML,function(e){0==e?(u.style.display="block",h.innerHTML="该商品已在购物车等候亲了",s.innerHTML="购物车查看",s.onclick=function(){location.href="car.html"},a.onclick=function(){u.style.display="none"}):1==e&&o.add("shops",t,function(){l.innerHTML="购物车("+Number(m+1)+")",c.innerHTML=m+1})}),o.fade()}},fade:function(){t.style.color="red",o.moveTo({"font-size":40,left:550,top:-75},1500,function(){t.style.color="#fff",o.moveTo({"font-size":15,left:10,top:10},10)})},add:function(e,t,o){var n=null;(n=localStorage[e]?JSON.parse(localStorage[e]):[]).push(t),localStorage[e]=JSON.stringify(n),o&&o()},judge:function(e,t,o,n){if(localStorage[e]){for(var i=JSON.parse(localStorage[e]),r=!1,l=0;l<i.length;l++)i[l][t]===o&&(r=!0);n(r?0:1)}else n(1)}}}();addshop.init();var check=function(){var o=document.querySelectorAll(".color button"),e=document.querySelector(".color"),n=document.querySelectorAll(".size button"),t=document.querySelector(".size");return{init:function(){for(var e=0;e<o.length;e++)o[e].index=e;for(e=0;e<n.length;e++)n[e].index=e;this.index=0,this.event()},event:function(){var o=this;e.onclick=function(e){var t=(e=e||window.event).target||e.srcElement;if("BUTTON"==t.nodeName)return o.show(t.index),!1},t.onclick=function(e){var t=(e=e||window.event).target||e.srcElement;"BUTTON"==t.nodeName&&o.size_show(t.index)}},show:function(e){this.index=e;for(var t=0;t<o.length;t++)o[t].removeAttribute("class");o[e].className="one"},size_show:function(e){for(var t=0;t<n.length;t++)n[t].removeAttribute("class");n[e].className="one"}}}();check.init();var insert=function(){var l=document.querySelector(".title1"),c=document.querySelector(".title2"),s=document.querySelector(".price-shop"),a=document.querySelectorAll(".box img");return{init:function(){var e=new OperationCookie,t=e.getItem("pname"),o=e.getItem("pprice"),n=e.getItem("pimg");(t||o||n)&&this.getdata(),this.event()},event:function(){},getdata:function(){var e=new OperationCookie,t=e.getItem("pname"),o=e.getItem("pprice"),n=e.getItem("pimg"),i=e.getItem("pinfo");l.innerHTML=t,c.innerHTML=i,s.innerHTML=o;for(var r=0;r<a.length;r++)a[r].src=n}}}();insert.init();