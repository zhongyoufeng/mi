"use strict";var phone=function(){var t=document.querySelector(".carcount"),o=(document.querySelector(".car_icon"),document.querySelector(".car_num"));return{init:function(){if(localStorage.shops&&"[]"!=localStorage.shops){for(var e=JSON.parse(localStorage.shops),n=0;n<e.length;n++)n;t.innerHTML="购物车("+n+")",o.innerHTML=n}else t.innerHTML="购物车(0)",o.innerHTML="0"}}}();phone.init();var add=function(){var e=document.querySelector(".phone"),d=document.querySelectorAll(".p_con h1"),p=document.querySelectorAll(".p_price"),m=document.querySelectorAll(".start_top img"),f=document.querySelectorAll(".add_car"),y=document.querySelector(".car_num"),S=document.querySelectorAll(".add_car2"),h=document.querySelectorAll(".start_fo img"),g=document.querySelectorAll(".fo_l h2"),q=document.querySelectorAll(".fo_r>p"),_=document.querySelectorAll(".p_detail"),v=document.querySelectorAll(".p_detail2"),H=document.querySelectorAll(".p_info"),L=document.querySelectorAll(".fo_info"),M=document.querySelector(".confirm"),T=document.querySelector(".close"),k=document.querySelector(".cover"),A=(document.querySelector(".cover_box"),document.querySelector(".cover_title"),document.querySelector(".sure")),I=localStorage.shops;return I=I?(I=JSON.parse(I)).length:0,{init:function(){this.event()},event:function(){var u=this;e.onclick=function(e){var n=(e=e||window.event).target||e.srcElement;if("add_car"==n.className){e.preventDefault(),I++;for(var t=0;t<f.length;t++)f[t].index=t;var o=d[n.index].innerHTML,r=p[n.index].innerHTML,l={shopname:o,prcie:r="￥"+parseInt(r),num:1,shop_img:i=m[n.index].src};u.judge("shops","shopname",o,function(e){0==e?(k.style.display="block",A.innerHTML="该商品已在购物车等候亲了",M.innerHTML="购物车查看",M.onclick=function(){location.href="car.html"},T.onclick=function(){k.style.display="none"}):1==e&&u.add("shops",l,function(){y.innerHTML=I,k.style.display="block",A.innerHTML="恭喜您成功添加到购物车!"})})}else if("add_car2"==n.className){e.preventDefault(),I++;for(t=0;t<S.length;t++)S[t].index=t;o=g[n.index].innerHTML,r=q[n.index].innerHTML,l={shopname:o,prcie:r="￥"+parseInt(r),num:1,shop_img:i=h[n.index].src};u.judge("shops","shopname",o,function(e){0==e?(k.style.display="block",A.innerHTML="该商品已在购物车等候亲了",M.innerHTML="购物车查看",M.onclick=function(){location.href="car.html"},T.onclick=function(){k.style.display="none"}):1==e&&u.add("shops",l,function(){y.innerHTML=I,k.style.display="block",A.innerHTML="恭喜您成功添加到购物车！"})})}else if("p_detail"==n.className){n.style.transform="scale(1.05)";for(var c=0;c<_.length;c++)_[c].l=c;o=d[n.l].innerHTML,r=p[n.l].innerHTML;r="￥"+parseInt(r);var i=m[n.l].src,a=H[n.l].innerHTML;(s=new OperationCookie).setItem("pname",o,1),s.setItem("pprice",r,1),s.setItem("pimg",i,1),s.setItem("pinfo",a,1)}else if("p_detail2"==n.className){n.style.transform="scale(1.05)";for(c=0;c<v.length;c++)v[c].l=c;o=g[n.l].innerHTML,r=q[n.l].innerHTML;r="￥"+parseInt(r);var s;i=h[n.l].src,a=L[n.l].innerHTML;(s=new OperationCookie).setItem("pname",o,1),s.setItem("pprice",r,1),s.setItem("pimg",i,1),s.setItem("pinfo",a,1)}},M.onclick=function(){location.href="car.html"},T.onclick=function(){k.style.display="none"}},add:function(e,n,t){var o=null;(o=localStorage[e]?JSON.parse(localStorage[e]):[]).push(n),localStorage[e]=JSON.stringify(o),t&&t()},judge:function(e,n,t,o){if(localStorage[e]){for(var r=JSON.parse(localStorage[e]),l=!1,c=0;c<r.length;c++)r[c][n]===t&&(l=!0);o(l?0:1)}else o(1)},getStyle:function(e,n){if(window.getComputedStyle)return window.getComputedStyle(e,null)[n];obj.currentStyle[arr]}}}();add.init();