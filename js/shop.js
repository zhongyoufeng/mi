"use strict";var big={init:function(){this.$box=document.querySelector(".box"),this.$showImage=this.$box.querySelector(".show-image"),this.$showBigImage=this.$box.querySelector(".show-big-image"),this.$ulbox=this.$box.querySelector(".img-box"),this.$liAll=this.$ulbox.children,this.$filter=this.$showImage.querySelector(".filter");for(var e=0;e<this.$liAll.length;e++)this.$liAll[e].index=e;this.event(),this.mouser()},event:function(){var r=this;this.$ulbox.onclick=function(e){var t=(e=e||window.event).target||e.srcElement;"IMG"===t.nodeName&&r.showImage(t.parentNode.index)},this.$showImage.onmouseenter=function(){r.$filter.style.display="block",r.$showBigImage.style.display="block"},this.$showImage.onmouseleave=function(){r.$filter.style.display="none",r.$showBigImage.style.display="none"},this.$showImage.onmousemove=function(e){var t=(e=e||window.event).pageX-this.offsetLeft-r.$filter.offsetWidth/2,o=e.pageY-this.offsetTop-r.$filter.offsetHeight/2,i=this.clientWidth-r.$filter.offsetWidth,n=this.clientHeight-r.$filter.offsetHeight;i<=t?t=i:t<=0&&(t=0),n<=o?o=n:o<=0&&(o=0),r.$filter.style.left=t+"px",r.$filter.style.top=o+"px";var l=r.$showBigImage.querySelector("img");l.style.left=-3*t+"px",l.style.top=-3*o+"px"}},showImage:function(e){console.log(e);for(var t=0;t<this.$liAll.length;t++)this.$liAll[t].className="";this.$liAll[e].className="active";var o=this.$liAll[e].querySelector("img").src;this.$showImage.querySelector("img").src=o.replace("small","big"),this.$showBigImage.querySelector("img").src=o.replace("small","largest"),console.log(o)},mouser:function(){for(var t=this,e=0;e<t.$liAll.length;e++)t.$liAll[e].onmouseenter=function(e){t.showImage(this.index)}}};big.init();var addshop=function(){var e=document.querySelector(".car"),i=document.querySelector(".title1"),n=document.querySelector(".price-shop"),l=document.querySelector(".shopnum"),r=document.querySelector(".carcount"),t=document.querySelector(".car_icon"),s=document.querySelector(".car_num"),o=new Move(".car_icon"),c=0;return{init:function(){if(localStorage.shops&&"[]"!=localStorage.shops){for(var e=JSON.parse(localStorage.shops),t=0;t<e.length;t++)c=t;r.innerHTML="购物车("+t+")",s.innerHTML=t}else r.innerHTML="购物车(0)",s.innerHTML="0";this.event()},event:function(){var o=this;e.onclick=function(){var e=document.querySelector(".img-box img").src;c++;var t={shopname:i.innerHTML,prcie:n.innerHTML,num:l.value,shop_img:e};o.judge("shops","shopname",l.value,function(e){o.add("shops",t,function(){r.innerHTML="购物车("+Number(c+1)+")",s.innerHTML=c+1})}),o.fade()}},fade:function(){t.style.color="red",o.moveTo({"font-size":40,left:550,top:-75},1500,function(){t.style.color="#fff",o.moveTo({"font-size":15,left:10,top:10},10)})},add:function(e,t,o){var i=null;(i=localStorage[e]?JSON.parse(localStorage[e]):[]).push(t),localStorage[e]=JSON.stringify(i),o&&o()},judge:function(e,t,o,i){if(localStorage[e]){for(var n=JSON.parse(localStorage[e]),l=!1,r=0;r<n.length;r++)n[r][t]===o&&(l=!0);i(l?0:1)}else i(1)}}}();addshop.init();var check=function(){var o=document.querySelectorAll(".color button"),e=document.querySelector(".color"),i=document.querySelectorAll(".size button"),t=document.querySelector(".size");return{init:function(){for(var e=0;e<o.length;e++)o[e].index=e;for(e=0;e<i.length;e++)i[e].index=e;this.index=0,this.event()},event:function(){var o=this;e.onclick=function(e){var t=(e=e||window.event).target||e.srcElement;if("BUTTON"==t.nodeName)return o.show(t.index),!1},t.onclick=function(e){var t=(e=e||window.event).target||e.srcElement;"BUTTON"==t.nodeName&&o.size_show(t.index)}},show:function(e){this.index=e;for(var t=0;t<o.length;t++)o[t].removeAttribute("class");o[e].className="one"},size_show:function(e){for(var t=0;t<i.length;t++)i[t].removeAttribute("class");i[e].className="one"}}}();check.init();